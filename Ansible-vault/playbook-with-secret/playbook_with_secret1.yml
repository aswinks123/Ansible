#Playbook with secrets included directly in the play
#Created by: Aswin KS

---
- name: Example Playbook with Vault secret that uses Direct secret integration
  hosts: all
  gather_facts: false

  vars:  #This api_key is in the ansible vault file ./my-secrets.yml : it is the output of cat command on that secret file
    api_key: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        36313964376532636363613939623836666261366635666331393035666166303465663639663234
        3432396336303366623032363230333135393738323861370a363165333339356462356635316138
        37386639613666363437333566303139316364363861346261333637386265333236336337613264
        6663383636666131370a316535326539333636376666373731316230396564343161396135663538
        66663863306165333862643332613566613131366131613030376638303733333737

    password: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        66383061323036336235336561373562343330663936346465653932343661666463366331306531
        6139393632626162363631323033303563343165626636390a313131336237306138393130386331
        37666164356165333539343531356365653036363631343762393733663039306634353331636662
        6437636562613635610a383134356636333434376134613666393736353464383838643738313831
        62373833363734386332623631356431323763323366323561373061396339386231
  tasks:
    - name: Display the API Key
      debug:
        var: api_key
    
    - name: Display the password 
      debug:
        var: password


  #Command to run this playbook: ansible-playbook playbook_with_secret1.yml --ask-vault-pass
  #Provide the vault password
